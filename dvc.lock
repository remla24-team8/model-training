schema: '2.0'
stages:
  get_data:
    cmd: python src/get_data.py data/train.txt data/test.txt data/val.txt
    deps:
    - path: src/get_data.py
      hash: md5
      md5: 503295f7b0c9edf3c585be76bd135d04
      size: 2163
    outs:
    - path: output/raw_x_test.joblib
      hash: md5
      md5: 5d5260ca5cfaf43ef4b87d950454943e
      size: 29790019
    - path: output/raw_x_train.joblib
      hash: md5
      md5: a8d1efa58ab655ad7e3ae6289a2771a6
      size: 85494549
    - path: output/raw_x_val.joblib
      hash: md5
      md5: 32ca321d68f1034fc9eb20e0dad90a13
      size: 42107707
    - path: output/raw_y_test.joblib
      hash: md5
      md5: 414bbd83a196cc0899bbf51b9764083f
      size: 4411008
    - path: output/raw_y_train.joblib
      hash: md5
      md5: e7661073e84fb9fc1386bb9beb617d5e
      size: 12665899
    - path: output/raw_y_val.joblib
      hash: md5
      md5: a967bd8fda10c5ae67333f14c44667e6
      size: 6238409
  preprocess:
    cmd: python src/process_data.py
    deps:
    - path: output/raw_x_test.joblib
      hash: md5
      md5: 5d5260ca5cfaf43ef4b87d950454943e
      size: 29790019
    - path: output/raw_x_train.joblib
      hash: md5
      md5: a8d1efa58ab655ad7e3ae6289a2771a6
      size: 85494549
    - path: output/raw_x_val.joblib
      hash: md5
      md5: 32ca321d68f1034fc9eb20e0dad90a13
      size: 42107707
    - path: output/raw_y_test.joblib
      hash: md5
      md5: 414bbd83a196cc0899bbf51b9764083f
      size: 4411008
    - path: output/raw_y_train.joblib
      hash: md5
      md5: e7661073e84fb9fc1386bb9beb617d5e
      size: 12665899
    - path: output/raw_y_val.joblib
      hash: md5
      md5: a967bd8fda10c5ae67333f14c44667e6
      size: 6238409
    - path: src/process_data.py
      hash: md5
      md5: 421857cf56a43bad7bff0049ffb87abf
      size: 1949
    outs:
    - path: output/char_index.joblib
      hash: md5
      md5: 941dc7e5461b0a429941866a00102b8c
      size: 444
    - path: output/x_test.joblib
      hash: md5
      md5: 9efc054fb130a7a7262ede3e002dbff8
      size: 291359441
    - path: output/x_train.joblib
      hash: md5
      md5: bf8f14fe123c36f899b44ad257c01b68
      size: 836619441
    - path: output/x_val.joblib
      hash: md5
      md5: 56b9176994f90b75f32286ca276f8b87
      size: 412064241
    - path: output/y_test.joblib
      hash: md5
      md5: cb123d0b96613ac4fa75532d76b3478a
      size: 2913833
    - path: output/y_train.joblib
      hash: md5
      md5: 1c71e546510693ba605e8ef098fc73e2
      size: 8366433
    - path: output/y_val.joblib
      hash: md5
      md5: 33b40b9c99b9dbc5dbf016f7adfaed70
      size: 4120881
  train:
    cmd: python src/train.py
    deps:
    - path: output/x_train.joblib
      hash: md5
      md5: bf8f14fe123c36f899b44ad257c01b68
      size: 836619441
    - path: output/x_val.joblib
      hash: md5
      md5: 56b9176994f90b75f32286ca276f8b87
      size: 412064241
    - path: output/y_train.joblib
      hash: md5
      md5: 1c71e546510693ba605e8ef098fc73e2
      size: 8366433
    - path: output/y_val.joblib
      hash: md5
      md5: 33b40b9c99b9dbc5dbf016f7adfaed70
      size: 4120881
    - path: src/model.py
      hash: md5
      md5: 644ee0799158a684abc164ca267452ae
      size: 2213
    - path: src/process_data.py
      hash: md5
      md5: 421857cf56a43bad7bff0049ffb87abf
      size: 1949
    - path: src/train.py
      hash: md5
      md5: 4f1535c3969fcd2deef4fcbc2bfb69b8
      size: 2028
    outs:
    - path: models/model.h5
      hash: md5
      md5: dff0fb63b85c35efd42e086e5f30c3f4
      size: 5483016
    - path: output/metrics.json
      hash: md5
      md5: 52da50cd135fb9329bc02ed9354d06ae
      size: 70
  mutamorphic_data:
    cmd: python tests/gen_mutamorphic_data.py
    deps:
    - path: tests/gen_mutamorphic_data.py
      hash: md5
      md5: 5a8aabf168c8b92dfadaef878fe3e738
      size: 3688
    - path: tests/testdata/URL_dataset.csv
      hash: md5
      md5: c7a43bac8e9279f8555da2091162b72d
      size: 32312591
    outs:
    - path: tests/testdata/mutamorphic_urls.txt
      hash: md5
      md5: e596a5a4d192677eb22fe37a6a467894
      size: 2256255
  mutamorphic_test:
    cmd: python -m pytest tests/test_mutamorphic.py
    deps:
    - path: tests/gen_mutamorphic_data.py
      hash: md5
      md5: 5a8aabf168c8b92dfadaef878fe3e738
      size: 3688
    - path: tests/test_mutamorphic.py
      hash: md5
      md5: 7c63a1b51e8f99ff198d441c65e1f411
      size: 5568
    - path: tests/testdata/mutamorphic_urls.txt
      hash: md5
      md5: 7f15b17b250dad0f8a5097b30f9967dd
      size: 2260364
